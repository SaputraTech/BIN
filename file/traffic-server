#!/bin/bash

# Fungsi untuk mengubah unit dari vnstat agar lebih rapi
format_bw() {
    local value=$1
    local unit=$2

    case $unit in
        "k") echo "$((value)) KB" ;;
        "M") echo "$((value)) MB" ;;
        "G") echo "$((value)) GB" ;;
        *) echo "$value $unit" ;;
    esac
}

# Data hari ini
utoday_raw=($(vnstat -i eth0 | grep "today" | awk '{print $5, $6}'))
ttoday_raw=($(vnstat -i eth0 | grep "today" | awk '{print $8, $9}'))
dtoday_raw=($(vnstat -i eth0 | grep "today" | awk '{print $2, $3}'))

utoday=$(format_bw "${utoday_raw[0]}" "${utoday_raw[1]}")
ttoday=$(format_bw "${ttoday_raw[0]}" "${ttoday_raw[1]}")
dtoday=$(format_bw "${dtoday_raw[0]}" "${dtoday_raw[1]}")

# Data kemarin
uyesterday_raw=($(vnstat -i eth0 | grep "yesterday" | awk '{print $5, $6}'))
tyesterday_raw=($(vnstat -i eth0 | grep "yesterday" | awk '{print $8, $9}'))
dyesterday_raw=($(vnstat -i eth0 | grep "yesterday" | awk '{print $2, $3}'))

uyesterday=$(format_bw "${uyesterday_raw[0]}" "${uyesterday_raw[1]}")
tyesterday=$(format_bw "${tyesterday_raw[0]}" "${tyesterday_raw[1]}")
dyesterday=$(format_bw "${dyesterday_raw[0]}" "${dyesterday_raw[1]}")

# Output ke layar
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo -e "  ğŸ”° Ê™á´€É´á´…á´¡Éªá´…á´›Êœ á´á´É´Éªá´›á´Ê€ÉªÉ´É¢ ğŸ”°"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo -e "âš¡ Pemakaian Kemarin âš¡"
echo -e "ğŸš€ Download : $dyesterday"
echo -e "ğŸš€ Upload   : $uyesterday"
echo -e "âœ… Total    : $tyesterday"
echo ""
echo -e "âš¡ Pemakaian Hari Ini âš¡"
echo -e "ğŸš€ Download : $dtoday"
echo -e "ğŸš€ Upload   : $utoday"
echo -e "âœ… Total    : $ttoday"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
