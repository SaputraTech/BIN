#!/bin/bash

# Fungsi untuk mengubah unit dari vnstat agar lebih rapi
format_bw() {
    local value=$1
    local unit=$2

    case $unit in
        "k") echo "$((value)) KB" ;;
        "M") echo "$((value)) MB" ;;
        "G") echo "$((value)) GB" ;;
        *) echo "$value $unit" ;;
    esac
}

# Data hari ini
utoday_raw=($(vnstat -i eth0 | grep "today" | awk '{print $5, $6}'))
ttoday_raw=($(vnstat -i eth0 | grep "today" | awk '{print $8, $9}'))
dtoday_raw=($(vnstat -i eth0 | grep "today" | awk '{print $2, $3}'))

utoday=$(format_bw "${utoday_raw[0]}" "${utoday_raw[1]}")
ttoday=$(format_bw "${ttoday_raw[0]}" "${ttoday_raw[1]}")
dtoday=$(format_bw "${dtoday_raw[0]}" "${dtoday_raw[1]}")

# Data kemarin
uyesterday_raw=($(vnstat -i eth0 | grep "yesterday" | awk '{print $5, $6}'))
tyesterday_raw=($(vnstat -i eth0 | grep "yesterday" | awk '{print $8, $9}'))
dyesterday_raw=($(vnstat -i eth0 | grep "yesterday" | awk '{print $2, $3}'))

uyesterday=$(format_bw "${uyesterday_raw[0]}" "${uyesterday_raw[1]}")
tyesterday=$(format_bw "${tyesterday_raw[0]}" "${tyesterday_raw[1]}")
dyesterday=$(format_bw "${dyesterday_raw[0]}" "${dyesterday_raw[1]}")

# Output ke layar
echo "━━━━━━━━━━━━━━━━━━━━"
echo -e "  🔰 ʙᴀɴᴅᴡɪᴅᴛʜ ᴍᴏɴɪᴛᴏʀɪɴɢ 🔰"
echo "━━━━━━━━━━━━━━━━━━━━"
echo ""
echo -e "⚡ Pemakaian Kemarin ⚡"
echo -e "🚀 Download : $dyesterday"
echo -e "🚀 Upload   : $uyesterday"
echo -e "✅ Total    : $tyesterday"
echo ""
echo -e "⚡ Pemakaian Hari Ini ⚡"
echo -e "🚀 Download : $dtoday"
echo -e "🚀 Upload   : $utoday"
echo -e "✅ Total    : $ttoday"
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
